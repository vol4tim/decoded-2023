(function(){var e={5978:function(e,t,n){"use strict";var s=n(5361),a=n(6281),o=n(9242),i=n(3396);function r(e,t,n,s,a,o){const r=(0,i.up)("Description"),u=(0,i.up)("MainPage");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r),a.isReady?((0,i.wg)(),(0,i.j4)(u,{key:0})):(0,i.kq)("",!0)],64)}var u=n(7464),c=n.n(u);function l(e){return new(c())(e.toString())}function d(e,t){return l(e).todp(t)}function v(e,t=0,n){return l(e).div(new(c())(10).pow(t.toString())).todp(n).toString()}c().set({toExpNeg:-31,toExpPos:31});var p=n(4870);const f={class:"col-1"},g=(0,i._)("h1",null,[(0,i._)("span",null,"Multi-agent"),(0,i._)("span",null,"system"),(0,i._)("span",null,"on Polkadot")],-1),m=(0,i._)("p",null," Collaborative programming of multiple robots for performing certain tasks has become increasingly accessible. ",-1),h=(0,i._)("a",{href:"https://robonomics.network",target:"_blank",class:"link"}," Robonomics parachain ",-1),b=(0,i._)("div",{class:"decor-plus"},"+",-1),w=(0,i._)("div",{class:"decor-lines"},[(0,i._)("div"),(0,i._)("div")],-1),y=[g,m,h,b,w];function k(e,t){return(0,i.wg)(),(0,i.iD)("div",f,y)}var S=n(89);const x={},M=(0,S.Z)(x,[["render",k]]);var U=M,R=n(7139);const P={class:"col-2"},_=["disabled"],j={class:"account"};function C(e,t,n,s,a,o){const r=(0,i.up)("robo-account-polkadot"),u=(0,i.up)("step1"),c=(0,i.up)("step2"),l=(0,i.up)("step3"),d=(0,i.up)("step4"),v=(0,i.up)("status");return(0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>s.launch&&s.launch(...e)),class:(0,R.C_)({started:s.tx.process.value||""!==s.statusStep1}),disabled:s.tx.process.value||""!==s.statusStep1}," Start ",10,_),(0,i._)("div",j,[(0,i.Wm)(r,{short:"",extensionAllowShift:"",extensionShowIcon:"",selectable:""})]),(0,i.Wm)(u,{status:s.statusStep1},null,8,["status"]),(0,i.Wm)(c,{status:s.statusStep2},null,8,["status"]),(0,i.Wm)(l,{status:s.statusStep3},null,8,["status"]),(0,i.Wm)(d,{status:s.statusStep4,color:s.сolorStep4},null,8,["status","color"]),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(s.statusText),1)])),_:1})])}var D={manipulator:"4CvF6jVED256b4iJZkZjLbet4i6rUhgxdN98b8VtGmWytJxQ",lamp:"4EEx5LiK6GPQaYVhyePut84uAg3nwsbzUWhsBvgyF5AMBMLR",dog:"4EEx5LiK6GPQaYVhyePut84uAg3nwsbzUWhsBvgyF5AMBMLR",command:"QmNLei78zWmzUdbeRB3CiUfAizWUrbeeZh5K1rhAQKCh52",subscription:"4HnTtj2hdExSjddA3xqMBx1o5S27XmUYBhjkGQ9ZkpW6Bz8w",red:"Qmdx4qag1yFRKJGNMNU2hneqqfQz28acg698gu3RGixPNy",green:"QmVep3wpUvMsYJwvVcwgp8ArzRffbsKLXpzwXsajn43sxK",timeout:{step1:3e3,step2:5e3,step3:15e3}};function I(){const{instance:e}=(0,i.f3)("RobonomicsProvider");return(0,p.IU)(e).value}n(1703);var W=n(7281);const O=(e=null)=>{const t=I(),n=(0,p.iH)(e),s=(0,p.iH)([]),a=async()=>{if(n.value)try{(0,W.Y)(n.value);const e=await t.rws.getDevices(n.value);return void(s.value=e.map((e=>e.toHuman())))}catch(e){console.log(e)}s.value=[]};return(0,i.YP)(n,(async()=>{await a()}),{immediate:!0}),{owner:n,devices:s,loadDevices:a}},H=(e=null)=>{const t=(0,p.iH)(e),n=(0,p.qj)({value:null}),s=I(),{devices:a,loadDevices:o}=O(t),r=()=>s.api.consts.rws.referenceCallWeight,u=async e=>{const t=await s.rws.getLedger(e);if(!t.isEmpty)return t.value},c=864e5,l=async e=>{const t=await u(e);if(!t)return-1;const n=t.freeWeight.toNumber(),s=t.lastUpdate.toNumber(),a=t.issueTime.toNumber(),o=r(),i=Date.now();let l=(()=>{let e=30*c;return i<a+e?1e4:0})();const d=i-s;return Math.floor(n+o*l*d/1e9)},d=(0,i.Fl)((()=>{if(null===n.value)return"";const e=(0,p.IU)(n),t=e.value.issueTime.toNumber();let s=0;return e.value.kind.isDaily&&(s=e.value.kind.value.days.toNumber()),t+s*c})),v=(0,i.Fl)((()=>{if(null===n.value)return 0;const e=(0,p.IU)(n);let t=0;return e.value.kind.isDaily&&(t=e.value.kind.value.days.toNumber()),t/30})),f=(0,i.Fl)((()=>!(null===n.value||Date.now()>d.value))),g=(0,i.Fl)((()=>null!==n.value)),m=async()=>{if(t.value)try{(0,W.Y)(t.value);const e=await u(t.value);if(e)return void(n.value=e)}catch(e){console.log(e)}n.value=null};return(0,i.YP)(t,(async()=>{await m()}),{immediate:!0}),{owner:t,dataRaw:n,hasSubscription:g,isActive:f,countMonth:v,validUntil:d,loadLedger:m,devices:a,loadDevices:o,getFreeWeightCalc:l}},A=()=>{const e=I(),{getFreeWeightCalc:t}=H(),n=(0,p.iH)(null),s=(0,p.iH)(null),a=(0,p.iH)(!1),o=async(t,n)=>{if(!n){if(!e.accountManager.account)throw new Error("Signer required");n=e.accountManager.account.address}return(await t.paymentInfo(n)).weight.toNumber()},i=async(e,n)=>{const s=await t(n);if(s<0)throw new Error(`Not found ledger ${n}`);const a=await o(e);if(a>s)throw new Error(`The origin account have no enough free weight to process these call. Call weight ${a}, Free weight ${s}`)},r=async(t,o=!1)=>{n.value=null,s.value=null,a.value=!0;try{o&&(await i(t,o),e.accountManager.useSubscription(o)),n.value=await e.accountManager.signAndSend(t),console.log("tx",n.value.block,n.value.tx)}catch(r){console.log(r),s.value=r.message}return a.value=!1,o&&e.accountManager.useSubscription(!1),n};return{error:s,process:a,result:n,send:r}};var E=n(6708);const T={class:"status"};function N(e,t,n,s,a,o){return(0,i.wg)(),(0,i.iD)("div",T,[(0,i.WI)(e.$slots,"default")])}var $={};const B=(0,S.Z)($,[["render",N]]);var F=B;const Z=(0,i.uE)('<div class="step-content"><div class="step-icon"></div><div class="step-titleline"><div class="step-number">1</div><div class="step-title"> MyCobot 280 Jetson Nano 6 DOF Collaborative Robot </div></div></div><div class="step-status"><span></span><span></span><span></span><span></span></div>',2),z=[Z];function L(e,t,n,s,a,o){return(0,i.wg)(),(0,i.iD)("div",{class:(0,R.C_)(["step step-1",n.status])},z,2)}var q={props:{status:{default:""}}};const Q=(0,S.Z)(q,[["render",L]]);var Y=Q;const K=(0,i.uE)('<div class="step-content"><div class="step-icon"></div><div class="step-titleline"><div class="step-number">2</div><div class="step-title">Human agent access</div></div></div><div class="step-status"><span></span><span></span><span></span><span></span></div>',2),V=[K];function G(e,t,n,s,a,o){return(0,i.wg)(),(0,i.iD)("div",{class:(0,R.C_)(["step step-2",n.status])},V,2)}var J={props:{status:{default:""}}};const X=(0,S.Z)(J,[["render",G]]);var ee=X;const te=(0,i.uE)('<div class="step-content"><div class="step-icon"></div><div class="step-titleline"><div class="step-number">3</div><div class="step-title">Mini Pupper 2 ROS2</div></div></div><div class="step-status"><span></span><span></span><span></span><span></span></div>',2),ne=[te];function se(e,t,n,s,a,o){return(0,i.wg)(),(0,i.iD)("div",{class:(0,R.C_)(["step step-3",n.status])},ne,2)}var ae={props:{status:{default:""}}};const oe=(0,S.Z)(ae,[["render",se]]);var ie=oe;const re=(0,i.uE)('<div class="step-content"><div class="step-icon"></div><div class="step-titleline"><div class="step-number">4</div><div class="step-title">Status lamp</div></div></div><div class="step-status"><span></span><span></span><span></span><span></span></div>',2),ue=[re];function ce(e,t,n,s,a,o){return(0,i.wg)(),(0,i.iD)("div",{class:(0,R.C_)(["step step-4",[n.status,n.color]])},ue,2)}var le={props:{status:{default:""},color:{default:""}}};const de=(0,S.Z)(le,[["render",ce]]);var ve=de;const pe={none:"",loading:"loading",ok:"ok",error:"error",red:"",green:"success"};function fe(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}var ge={components:{Step1:Y,Step2:ee,Step3:ie,Step4:ve,Status:F},setup(){const e=I(),t=A(),n=(0,p.iH)("Waiting for pressing 'Start' button"),s=(0,p.iH)(pe.none),a=(0,p.iH)(pe.none),o=(0,p.iH)(pe.none),i=(0,p.iH)(pe.none),r=(0,p.iH)(pe.red),u=async()=>{n.value="Tx launched by 'Start' button",s.value=pe.loading;const u=e.launch.send(D.manipulator,D.command);if(await t.send(u,D.subscription),t.error.value)"Cancelled"!==t.error.value?(console.log(`Error: ${t.error.value}`),n.value=t.error.value,s.value=pe.error):(console.log("Calcel"),n.value="Waiting for pressing 'Start' button",s.value=pe.none);else{console.log("Launch sended");const t=await e.launch.on({},(e=>{for(const s of e){const e=E.P6.hexToCid(s.parameter);s.account===D.dog&&s.robot===D.lamp&&(a.value=pe.ok,o.value=pe.ok,i.value=pe.ok,e===D.red?(n.value="Status lamp got result of track, failed",r.value=pe.red):(n.value="Status lamp got result of track, success",r.value=pe.green),t())}}));n.value="Transaction sent",await fe(1500),a.value===pe.none&&(n.value="MyCobot received request",s.value=pe.ok,a.value=pe.loading),await fe(D.timeout.step1),n.value="Human agent got access",await fe(D.timeout.step2),o.value===pe.none&&(n.value="Human agent is manipulating Mini Pupper 2",a.value=pe.ok,o.value=pe.loading),await fe(D.timeout.step3),i.value===pe.none&&(o.value=pe.ok,i.value=pe.loading)}};return{launch:u,tx:t,statusText:n,statusStep1:s,statusStep2:a,statusStep3:o,statusStep4:i,"сolorStep4":r}}};const me=(0,S.Z)(ge,[["render",C]]);var he=me,be={name:"App",components:{Description:U,MainPage:he},inject:["RobonomicsProvider"],data(){return{isReady:this.RobonomicsProvider.isReady}},computed:{robonomics:function(){return(0,p.IU)(this.RobonomicsProvider.instance.value)}},watch:{isReady:function(){this.handlerAccount(this.$store.state.robonomicsUIvue.polkadot.address)},"$store.state.robonomicsUIvue.polkadot.extensionObj":function(e){e.signer&&e.signer.signRaw&&this.$store.state.robonomicsUIvue.polkadot.address&&this.handlerAccount(this.$store.state.robonomicsUIvue.polkadot.address)},"$store.state.robonomicsUIvue.polkadot.address":{handler:function(e){e&&this.$store.state.robonomicsUIvue.polkadot.extensionObj.signer&&this.$store.state.robonomicsUIvue.polkadot.extensionObj.signer.signRaw&&this.handlerAccount(e)},immediate:!0}},methods:{async handlerAccount(e){if(!this.isReady)return;this.unsubscribeBalance&&this.unsubscribeBalance();const t=this.$store.state.robonomicsUIvue.polkadot.accounts.find((t=>t.address===e));t&&(await this.robonomics.accountManager.setSender(e,{type:t.type,extension:this.$store.state.robonomicsUIvue.polkadot.extensionObj}),this.unsubscribeBalance=await this.robonomics.account.getBalance(e,(e=>{const t=e.free.sub(e.feeFrozen);this.$store.commit("polkadot/setBalanceXRT",d(v(t,this.robonomics.api.registry.chainDecimals[0]),4))})))}}};const we=(0,S.Z)(be,[["render",r]]);var ye=we,ke=n(720),Se=n(6117),xe=n(142);class Me extends E.Uk{constructor(e,t={},n=null){super(e,n),this.extension=null,e.loadAll(t),this.setReady(!0)}async beforeSetSender(e,{type:t,extension:n}){this.extension=n;try{this.keyring.getPair(e)}catch(s){this.keyring.loadInjected(e,{},t)}}async afterSetSender(){this.account.meta.isInjected&&this.extension&&(this.api.setSigner(this.extension.signer),this.account.signMsg=async e=>(await this.extension.signer.signRaw({address:this.account.address,data:(0,Se.c)((0,xe.Rl)(e)),type:"bytes"})).signature)}}var Ue={install:async(e,t)=>{const n=(0,p.iH)(!1),s=(0,p.qj)({value:void 0});e.provide("RobonomicsProvider",{isReady:n,instance:s}),s.value=await E.l.createInstance(t),(0,p.IU)(s).value.setAccountManager(new Me(ke.ZP)),n.value=!0}},Re=n(65);const Pe=(0,Re.MT)({state:{name:"Vue"}});var _e=Pe;window.Buffer=s.lW;const je=(0,o.ri)(ye);je.use(_e).use(a.robonomicsUI,{store:_e}).use(Ue,{endpoint:"wss://kusama.rpc.robonomics.network/"}).mount("#app")},6601:function(){},173:function(){},1887:function(){}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,s,a,o){if(!s){var i=1/0;for(l=0;l<e.length;l++){s=e[l][0],a=e[l][1],o=e[l][2];for(var r=!0,u=0;u<s.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](s[u])}))?s.splice(u--,1):(r=!1,o<i&&(i=o));if(r){e.splice(l--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[s,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,i=s[0],r=s[1],u=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(u)var l=u(n)}for(t&&t(s);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},s=self["webpackChunkdecoded_2023"]=self["webpackChunkdecoded_2023"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(5978)}));s=n.O(s)})();
//# sourceMappingURL=app.1364c41f.js.map